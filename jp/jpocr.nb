(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 10.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[      5666,        167]
NotebookOptionsPosition[      5194,        147]
NotebookOutlinePosition[      5542,        162]
CellTagsIndexPosition[      5499,        159]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{
Cell[BoxData[
 RowBox[{
  RowBox[{"adaptiveThreshold", "[", "i_", "]"}], ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"white", ",", "whiteAdjusted"}], "}"}], ",", "\n", "\t", 
    RowBox[{"(*", 
     RowBox[{"{", 
      RowBox[{
       RowBox[{"white", "=", 
        RowBox[{"Closing", "[", 
         RowBox[{"i", ",", 
          RowBox[{"DiskMatrix", "[", "7", "]"}]}], "]"}]}], ",", 
       RowBox[{"whiteAdjusted", "=", 
        RowBox[{"Image", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"ImageData", "[", "i", "]"}], "/", 
           RowBox[{"ImageData", "[", "white", "]"}]}], "*", "0.85"}], "]"}]}],
        ",", 
       RowBox[{"Binarize", "[", "whiteAdjusted", "]"}]}], "}"}], "*)"}], "\n",
     "\t", 
    RowBox[{
     RowBox[{"white", "=", 
      RowBox[{"Closing", "[", 
       RowBox[{"i", ",", 
        RowBox[{"DiskMatrix", "[", "7", "]"}]}], "]"}]}], ";", "\n", "\t", 
     RowBox[{"whiteAdjusted", "=", 
      RowBox[{"Image", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"ImageData", "[", "i", "]"}], "/", 
         RowBox[{"ImageData", "[", "white", "]"}]}], "*", "0.85"}], "]"}]}], 
     ";", "\n", "\t", "whiteAdjusted"}]}], "\n", "\t", 
   RowBox[{"(*", 
    RowBox[{"Binarize", "[", "whiteAdjusted", "]"}], "*)"}], "\n", 
   "]"}]}]], "Input"],

Cell[BoxData[
 RowBox[{
  RowBox[{"clipboard", "[", "]"}], ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", "data", "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"data", "=", 
      RowBox[{"ToExpression", "@", 
       RowBox[{"Cases", "[", 
        RowBox[{
         RowBox[{"NotebookGet", "[", 
          RowBox[{"ClipboardNotebook", "[", "]"}], "]"}], ",", 
         RowBox[{"BoxData", "[", "_", "]"}], ",", "Infinity"}], "]"}]}]}], 
     ";", "\[IndentingNewLine]", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"Length", "[", "data", "]"}], ">", "0"}], ",", 
       RowBox[{"First", "[", "data", "]"}], ",", "Null"}], "]"}]}]}], 
   "\[IndentingNewLine]", "]"}]}]], "Input",
 CellChangeTimes->{{3.62590695294836*^9, 3.625907132053604*^9}, {
   3.6259071921470413`*^9, 3.625907194592181*^9}, {3.62590723986077*^9, 
   3.6259072830462403`*^9}, 3.6259074336558547`*^9}],

Cell[BoxData[
 RowBox[{
  RowBox[{"reconize", "[", "]"}], ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"img", ",", "i"}], "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"img", "=", 
      RowBox[{"clipboard", "[", "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"i", "=", 
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{"img", "//", "adaptiveThreshold"}], "//", 
         RowBox[{
          RowBox[{"ImageResize", "[", 
           RowBox[{"#", ",", 
            RowBox[{"Scaled", "[", "10", "]"}]}], "]"}], "&"}]}], "//", 
        "Binarize"}], "//", "ColorNegate"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"SetDirectory", "@", 
      RowBox[{"NotebookDirectory", "[", "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"Export", "[", 
      RowBox[{"\"\<E:/Tesseract-OCR/0.jpg\>\"", ",", "i"}], "]"}]}]}], 
   RowBox[{"(*", "*)"}], "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{"TextRecognize", "[", 
     RowBox[{"i", ",", 
      RowBox[{"Language", "\[Rule]", "\"\<Japanese\>\""}]}], "]"}], "*)"}], 
   "\[IndentingNewLine]", "]"}]}]], "Input",
 CellChangeTimes->CompressedData["
1:eJxTTMoPSmViYGAQAWIQzSOjfeEe82vHT2zLr4NoIZf0hyB6wqn1z0D04gOz
PoDo205vwPSzfiOm+0D6ustkFhBtzRnlBaJLmL6DaastPTNBdI43wywQ7ZN6
fSOI7lsUtglEr5N5d+YnkD53+NxZEC3ZLNbyH0hrPe8D02kSB5g5WV47VqeY
8YHofR47S0G0nXNhGYheEMVVDaL/uC6uAcvLhs4C0UUJHnNAdFtp3HIQnc/z
biWIZr9jux1Eu3jmguk/nxfuBdFqtuz7QHROofVhEL3o4UowveznnQ8gWuX6
kS8gOtgig5ULSDMsluIF0efEQ6RB9PK6IjANAI7MkBg=
  "]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"reconize", "[", "]"}]], "Input",
 CellChangeTimes->{{3.6259079053788357`*^9, 3.625907907603963*^9}}],

Cell[BoxData["\<\"E:/Tesseract-OCR/0.jpg\"\>"], "Output",
 CellChangeTimes->{{3.6259954975471897`*^9, 3.625995516046248*^9}, 
   3.6259955498331804`*^9, 3.6259956023411837`*^9, {3.6259957151196346`*^9, 
   3.6259957239351387`*^9}, 3.62599577501406*^9, {3.6259958101780715`*^9, 
   3.625995817689501*^9}, {3.6259963406264114`*^9, 3.6259963471517844`*^9}, 
   3.625996514165337*^9}]
}, Open  ]],

Cell[BoxData[
 RowBox[{"(*", 
  RowBox[{
   RowBox[{
    RowBox[{"tesseract", ".", "exe"}], " ", 
    RowBox[{"jp", ".", "jpg"}], " ", "0"}], " ", "-", 
   RowBox[{"l", " ", "jpn"}], "-", 
   RowBox[{"psm", " ", "7"}]}], "*)"}]], "Input",
 CellChangeTimes->{{3.625995328736534*^9, 3.625995345569497*^9}}]
},
WindowSize->{1440, 705},
WindowMargins->{{113, Automatic}, {29, Automatic}},
FrontEndVersion->"10.0 for Microsoft Windows (64-bit) (September 9, 2014)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[558, 20, 1328, 37, 152, "Input"],
Cell[1889, 59, 927, 23, 92, "Input"],
Cell[2819, 84, 1520, 37, 152, "Input"],
Cell[CellGroupData[{
Cell[4364, 125, 124, 2, 31, "Input"],
Cell[4491, 129, 380, 5, 31, "Output"]
}, Open  ]],
Cell[4886, 137, 304, 8, 31, "Input"]
}
]
*)

(* End of internal cache information *)
