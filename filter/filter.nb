(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 10.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[      6662,        195]
NotebookOptionsPosition[      6154,        175]
NotebookOutlinePosition[      6495,        190]
CellTagsIndexPosition[      6452,        187]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{
Cell[BoxData[
 RowBox[{
  RowBox[{"horizonLines", "[", "i_", "]"}], ":=", 
  RowBox[{
   RowBox[{"MorphologicalTransform", "[", 
    RowBox[{"i", ",", " ", 
     RowBox[{
      RowBox[{"#", " ", "/.", 
       RowBox[{
        TagBox[
         RowBox[{"(", "\[NoBreak]", GridBox[{
            {"0", "0", "0"},
            {"1", "1", "1"},
            {"1", "1", "1"}
           },
           
           GridBoxAlignment->{
            "Columns" -> {{Center}}, "ColumnsIndexed" -> {}, 
             "Rows" -> {{Baseline}}, "RowsIndexed" -> {}},
           GridBoxSpacings->{"Columns" -> {
               Offset[0.27999999999999997`], {
                Offset[0.7]}, 
               Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
               Offset[0.2], {
                Offset[0.4]}, 
               Offset[0.2]}, "RowsIndexed" -> {}}], "\[NoBreak]", ")"}],
         Function[BoxForm`e$, 
          MatrixForm[BoxForm`e$]]], "\[Rule]", " ", "1"}]}], " ", "&"}]}], 
    "]"}], "//", "DeleteBorderComponents"}]}]], "Input",
 CellChangeTimes->{{3.6255204660086064`*^9, 3.6255204749681187`*^9}, {
  3.6255205059818926`*^9, 3.6255205740377855`*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"verticalLines", "[", "i_", "]"}], ":=", 
  RowBox[{
   RowBox[{"MorphologicalTransform", "[", 
    RowBox[{"i", ",", " ", 
     RowBox[{
      RowBox[{"#", " ", "/.", 
       RowBox[{
        TagBox[
         RowBox[{"(", "\[NoBreak]", GridBox[{
            {"0", "1", "1"},
            {"0", "1", "1"},
            {"0", "1", "1"}
           },
           
           GridBoxAlignment->{
            "Columns" -> {{Center}}, "ColumnsIndexed" -> {}, 
             "Rows" -> {{Baseline}}, "RowsIndexed" -> {}},
           GridBoxSpacings->{"Columns" -> {
               Offset[0.27999999999999997`], {
                Offset[0.7]}, 
               Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
               Offset[0.2], {
                Offset[0.4]}, 
               Offset[0.2]}, "RowsIndexed" -> {}}], "\[NoBreak]", ")"}],
         Function[BoxForm`e$, 
          MatrixForm[BoxForm`e$]]], "\[Rule]", " ", "1"}]}], " ", "&"}]}], 
    "]"}], "//", "DeleteBorderComponents"}]}]], "Input",
 CellChangeTimes->{{3.6255205917467985`*^9, 3.6255206141560802`*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"okQ", "[", "i_", "]"}], ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"ImageType", "@", "i"}], "\[Equal]", "\"\<Byte\>\""}]}], 
   "\[IndentingNewLine]", "]"}]}]], "Input",
 CellChangeTimes->{{3.6254630579490533`*^9, 3.6254630598261604`*^9}, 
   3.6254631130702057`*^9}],

Cell[BoxData[
 RowBox[{
  RowBox[{"imgs", "=", 
   RowBox[{"{", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"i01", "=", 
      RowBox[{
      "Import", "@", "\"\<D:\\\\gh\\\\nb32\\\\filter\\\\0001.bmp\>\""}]}], 
     ",", "\[IndentingNewLine]", 
     RowBox[{"i02", "=", 
      RowBox[{
      "Import", "@", 
       "\"\<D:\\\\gh\\\\nb32\\\\filter\\\\IMG_1791.JPG\>\""}]}]}], 
    "\[IndentingNewLine]", "}"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.625460286825554*^9, 3.6254603169612775`*^9}, 
   3.625460438284217*^9, 3.6254605024248857`*^9, {3.6254631530704937`*^9, 
   3.625463253722251*^9}}],

Cell[BoxData[
 RowBox[{"okQ", "/@", "imgs"}]], "Input",
 CellChangeTimes->{{3.62546312834608*^9, 3.6254631290951223`*^9}, {
  3.625463176150814*^9, 3.6254631763298244`*^9}, {3.6254632441457033`*^9, 
  3.6254632458688016`*^9}}],

Cell[BoxData[
 RowBox[{"ih", "=", 
  RowBox[{
   RowBox[{"MorphologicalTransform", "[", 
    RowBox[{"i01", ",", " ", 
     RowBox[{
      RowBox[{"#", " ", "/.", 
       RowBox[{
        TagBox[
         RowBox[{"(", "\[NoBreak]", GridBox[{
            {"0", "0", "0"},
            {"1", "1", "1"},
            {"1", "1", "1"}
           },
           
           GridBoxAlignment->{
            "Columns" -> {{Center}}, "ColumnsIndexed" -> {}, 
             "Rows" -> {{Baseline}}, "RowsIndexed" -> {}},
           GridBoxSpacings->{"Columns" -> {
               Offset[0.27999999999999997`], {
                Offset[0.7]}, 
               Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
               Offset[0.2], {
                Offset[0.4]}, 
               Offset[0.2]}, "RowsIndexed" -> {}}], "\[NoBreak]", ")"}],
         Function[BoxForm`e$, 
          MatrixForm[BoxForm`e$]]], "\[Rule]", " ", "1"}]}], " ", "&"}]}], 
    "]"}], "//", "DeleteBorderComponents"}]}]], "Input",
 CellChangeTimes->{{3.6254596859001827`*^9, 3.625459703666199*^9}, 
   3.62546003866236*^9, {3.6254603222775817`*^9, 3.625460323062627*^9}, {
   3.6254633562481146`*^9, 3.625463356842149*^9}, {3.625463770750823*^9, 
   3.625463771426862*^9}, {3.625463857348776*^9, 3.6254638617310266`*^9}}],

Cell[BoxData[
 RowBox[{"\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"lines", "=", 
     RowBox[{"ImageLines", "[", 
      RowBox[{"ih", ",", 
       RowBox[{"MaxFeatures", "\[Rule]", "5"}]}], "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{"Show", "[", 
    RowBox[{"i01", ",", 
     RowBox[{"Graphics", "[", 
      RowBox[{"{", 
       RowBox[{"Thick", ",", "Orange", ",", 
        RowBox[{"Line", "/@", "lines"}]}], "}"}], "]"}]}], "]"}]}]}]], "Input",
 CellChangeTimes->{{3.6254637362048473`*^9, 3.6254637883778315`*^9}, {
  3.625464488132855*^9, 3.6254644934391584`*^9}, {3.6254646777387*^9, 
  3.6254646783627357`*^9}}],

Cell[BoxData[
 RowBox[{"horizonLines", "@", "i01"}]], "Input",
 CellChangeTimes->{{3.6255208674015646`*^9, 3.625520882153408*^9}}]
},
WindowSize->{1432, 818},
WindowMargins->{{-4, Automatic}, {Automatic, 0}},
FrontEndVersion->"10.0 for Microsoft Windows (64-bit) (July 1, 2014)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[558, 20, 1168, 30, 57, "Input"],
Cell[1729, 52, 1116, 29, 57, "Input"],
Cell[2848, 83, 383, 10, 72, "Input"],
Cell[3234, 95, 605, 16, 92, "Input"],
Cell[3842, 113, 226, 4, 31, "Input"],
Cell[4071, 119, 1298, 31, 57, "Input"],
Cell[5372, 152, 645, 17, 72, "Input"],
Cell[6020, 171, 130, 2, 31, "Input"]
}
]
*)

(* End of internal cache information *)
