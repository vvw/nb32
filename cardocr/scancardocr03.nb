(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 10.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[     75705,       1968]
NotebookOptionsPosition[     73842,       1916]
NotebookOutlinePosition[     74189,       1931]
CellTagsIndexPosition[     74146,       1928]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{
Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"filename", "[", "fullpath_", "]"}], ":=", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{"FileNameSplit", "[", "fullpath", "]"}], "//", "Last"}], "//", 
        RowBox[{
         RowBox[{"StringSplit", "[", 
          RowBox[{"#", ",", "\"\<.\>\""}], "]"}], "&"}]}], "//", "Most"}], "//",
       "First"}]}], "\[IndentingNewLine]", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"imageTakeRectangle", "[", "i_", "]"}], ":=", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "largestComponent", ",", "mask", ",", "thred", ",", "dim", ",", 
       "bdim"}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{
       RowBox[{"largestComponent", "[", "iBinColorNeg_", "]"}], ":=", 
       RowBox[{"With", "[", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"components", "=", 
           RowBox[{
            RowBox[{"ComponentMeasurements", "[", 
             RowBox[{"iBinColorNeg", ",", 
              RowBox[{"{", 
               RowBox[{"\"\<ConvexArea\>\"", ",", "\"\<Mask\>\""}], "}"}]}], 
             "]"}], "[", 
            RowBox[{"[", 
             RowBox[{"All", ",", "2"}], "]"}], "]"}]}], "}"}], ",", 
         RowBox[{"Image", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"SortBy", "[", 
             RowBox[{"components", ",", "First"}], "]"}], "[", 
            RowBox[{"[", 
             RowBox[{
              RowBox[{"-", "1"}], ",", "2"}], "]"}], "]"}], ",", 
           "\"\<Bit\>\""}], "]"}]}], "\[IndentingNewLine]", "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"dim", "=", 
       RowBox[{"ImageDimensions", "[", "i", "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"thred", "=", 
       RowBox[{
        RowBox[{"dim", "[", 
         RowBox[{"[", "1", "]"}], "]"}], "/", "29"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"mask", "=", 
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{"i", "//", "Binarize"}], "//", "ColorNegate"}], "//", 
         RowBox[{
          RowBox[{"DeleteSmallComponents", "[", 
           RowBox[{"#", ",", "thred"}], "]"}], "&"}]}], "//", 
        "DeleteBorderComponents"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"bdim", "=", 
       RowBox[{"BorderDimensions", "[", "mask", "]"}]}], ";", 
      RowBox[{"(*", 
       RowBox[{"largestComponent", "//", "FillingTransform"}], "*)"}], 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"ImageTake", "[", 
        RowBox[{"i", ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{"bdim", "[", 
            RowBox[{"[", 
             RowBox[{"2", ",", "2"}], "]"}], "]"}], ",", 
           RowBox[{
            RowBox[{"dim", "[", 
             RowBox[{"[", "2", "]"}], "]"}], "-", 
            RowBox[{"bdim", "[", 
             RowBox[{"[", 
              RowBox[{"2", ",", "1"}], "]"}], "]"}]}]}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"bdim", "[", 
             RowBox[{"[", "1", "]"}], "]"}], "[", 
            RowBox[{"[", "1", "]"}], "]"}], ",", 
           RowBox[{
            RowBox[{"dim", "[", 
             RowBox[{"[", "1", "]"}], "]"}], "-", 
            RowBox[{
             RowBox[{"bdim", "[", 
              RowBox[{"[", "1", "]"}], "]"}], "[", 
             RowBox[{"[", "2", "]"}], "]"}]}]}], "}"}]}], "]"}], "//", 
       "Binarize"}]}]}], "\[IndentingNewLine]", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"imageTakeRectangle2", "[", "i_", "]"}], ":=", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"largestComponent", ",", "mask", ",", "dim", ",", "bdim"}], 
      "}"}], ",", "\n", "\t", 
     RowBox[{
      RowBox[{
       RowBox[{"largestComponent", "[", "iBinColorNeg_", "]"}], ":=", 
       RowBox[{"With", "[", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"components", "=", 
           RowBox[{
            RowBox[{"ComponentMeasurements", "[", 
             RowBox[{"iBinColorNeg", ",", 
              RowBox[{"{", 
               RowBox[{"\"\<ConvexArea\>\"", ",", "\"\<Mask\>\""}], "}"}]}], 
             "]"}], "[", 
            RowBox[{"[", 
             RowBox[{"All", ",", "2"}], "]"}], "]"}]}], "}"}], ",", "\n", 
         "\t\t", 
         RowBox[{"Image", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"SortBy", "[", 
             RowBox[{"components", ",", "First"}], "]"}], "[", 
            RowBox[{"[", 
             RowBox[{
              RowBox[{"-", "1"}], ",", "2"}], "]"}], "]"}], ",", 
           "\"\<Bit\>\""}], "]"}]}], "\n", "\t", "]"}]}], ";", "\n", "\t", 
      RowBox[{"mask", "=", 
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{"i", "//", "Binarize"}], "//", "ColorNegate"}], "//", 
         "largestComponent"}], "//", "FillingTransform"}]}], ";", "\n", "\t", 
      RowBox[{"dim", "=", 
       RowBox[{"ImageDimensions", "[", "i", "]"}]}], ";", 
      RowBox[{"(*", 
       RowBox[{"{", 
        RowBox[{"3307", ",", "1814"}], "}"}], "*)"}], "\n", "\t", 
      RowBox[{"bdim", "=", 
       RowBox[{"BorderDimensions", "[", "mask", "]"}]}], ";", 
      RowBox[{"(*", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"554", ",", "522"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{"24", ",", "82"}], "}"}]}], "}"}], "*)"}], 
      RowBox[{"(*", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"left", ",", "right"}], "}"}], ",", 
         RowBox[{"{", 
          RowBox[{"bottom", ",", "top"}], "}"}]}], "}"}], "*)"}], "\n", "\t", 
      RowBox[{"ImageTake", "[", 
       RowBox[{"i", ",", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"bdim", "[", 
           RowBox[{"[", 
            RowBox[{"2", ",", "2"}], "]"}], "]"}], ",", 
          RowBox[{
           RowBox[{"dim", "[", 
            RowBox[{"[", "2", "]"}], "]"}], "-", 
           RowBox[{"bdim", "[", 
            RowBox[{"[", 
             RowBox[{"2", ",", "1"}], "]"}], "]"}]}]}], "}"}], ",", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{
           RowBox[{"bdim", "[", 
            RowBox[{"[", "1", "]"}], "]"}], "[", 
           RowBox[{"[", "1", "]"}], "]"}], ",", 
          RowBox[{
           RowBox[{"dim", "[", 
            RowBox[{"[", "1", "]"}], "]"}], "-", 
           RowBox[{
            RowBox[{"bdim", "[", 
             RowBox[{"[", "1", "]"}], "]"}], "[", 
            RowBox[{"[", "2", "]"}], "]"}]}]}], "}"}]}], "]"}]}]}], "\n", 
    "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"imageTakeRectangle3", "[", "i_", "]"}], ":=", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"rectangle", ",", "rect"}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"rectangle", "=", 
       RowBox[{
        RowBox[{"DeleteBorderComponents", "[", 
         RowBox[{
          RowBox[{"i", "//", "Binarize"}], "//", "ColorNegate"}], "]"}], "//",
         "DeleteSmallComponents"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"mask", "=", 
       RowBox[{
        RowBox[{"rectangle", "//", "FillingTransform"}], "//", 
        "ColorNegate"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"rect", "=", 
       RowBox[{
        RowBox[{
         RowBox[{"ImageSubtract", "[", 
          RowBox[{"i", ",", "mask"}], "]"}], "//", "imageCrop"}], "//", 
        "Binarize"}]}]}]}], "\[IndentingNewLine]", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"horizonLinesImage", "[", "i_", "]"}], ":=", 
   RowBox[{
    RowBox[{"MorphologicalTransform", "[", 
     RowBox[{"i", ",", " ", 
      RowBox[{
       RowBox[{"#", " ", "/.", 
        RowBox[{
         TagBox[
          RowBox[{"(", "\[NoBreak]", GridBox[{
             {"0", "0", "0"},
             {"1", "1", "1"},
             {"1", "1", "1"}
            },
            
            GridBoxAlignment->{
             "Columns" -> {{Center}}, "ColumnsIndexed" -> {}, 
              "Rows" -> {{Baseline}}, "RowsIndexed" -> {}},
            GridBoxSpacings->{"Columns" -> {
                Offset[0.27999999999999997`], {
                 Offset[0.7]}, 
                Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
                Offset[0.2], {
                 Offset[0.4]}, 
                Offset[0.2]}, "RowsIndexed" -> {}}], "\[NoBreak]", ")"}],
          Function[BoxForm`e$, 
           MatrixForm[BoxForm`e$]]], "\[Rule]", " ", "1"}]}], " ", "&"}]}], 
     "]"}], "//", "DeleteBorderComponents"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"verticalLinesImage", "[", "i_", "]"}], ":=", 
   RowBox[{
    RowBox[{"MorphologicalTransform", "[", 
     RowBox[{"i", ",", " ", 
      RowBox[{
       RowBox[{"#", " ", "/.", 
        RowBox[{
         TagBox[
          RowBox[{"(", "\[NoBreak]", GridBox[{
             {"0", "1", "1"},
             {"0", "1", "1"},
             {"0", "1", "1"}
            },
            
            GridBoxAlignment->{
             "Columns" -> {{Center}}, "ColumnsIndexed" -> {}, 
              "Rows" -> {{Baseline}}, "RowsIndexed" -> {}},
            GridBoxSpacings->{"Columns" -> {
                Offset[0.27999999999999997`], {
                 Offset[0.7]}, 
                Offset[0.27999999999999997`]}, "ColumnsIndexed" -> {}, "Rows" -> {
                Offset[0.2], {
                 Offset[0.4]}, 
                Offset[0.2]}, "RowsIndexed" -> {}}], "\[NoBreak]", ")"}],
          Function[BoxForm`e$, 
           MatrixForm[BoxForm`e$]]], "\[Rule]", " ", "1"}]}], " ", "&"}]}], 
     "]"}], "//", "DeleteBorderComponents"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"imageCrop", "[", "i_", "]"}], ":=", 
   RowBox[{"ImagePad", "[", 
    RowBox[{"i", ",", 
     RowBox[{
      RowBox[{"-", "1"}], "*", 
      RowBox[{"BorderDimensions", "[", "i", "]"}]}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"imageSelect", "[", "irectangle_", "]"}], ":=", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "i", ",", "dim", ",", "tript", ",", "large", ",", "lg", ",", "lines", 
       ",", "w", ",", "h", ",", "hi", ",", "iselect", ",", "iclean"}], "}"}], 
     ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"i", "=", "irectangle"}], ";", 
      RowBox[{"(*", 
       RowBox[{"ImageResize", "[", 
        RowBox[{"irectangle", ",", "1024"}], "]"}], "*)"}], 
      "\[IndentingNewLine]", 
      RowBox[{"lines", "=", 
       RowBox[{
        RowBox[{"horizonLinesImage", "[", "i", "]"}], "//", 
        RowBox[{
         RowBox[{"ImageLines", "[", 
          RowBox[{"#", ",", 
           RowBox[{"MaxFeatures", "\[Rule]", "3"}]}], "]"}], "&"}]}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"w", ",", "h"}], "}"}], "=", 
       RowBox[{"ImageDimensions", "[", "i", "]"}]}], ";", "\n", 
      RowBox[{"(*", 
       RowBox[{"{", 
        RowBox[{"2232", ",", "1709"}], "}"}], "*)"}], "\[IndentingNewLine]", 
      RowBox[{"tript", "=", 
       RowBox[{
        RowBox[{
         RowBox[{"Cases", "[", 
          RowBox[{"lines", ",", 
           RowBox[{"{", 
            RowBox[{
             RowBox[{"x_Real", "?", 
              RowBox[{"(", 
               RowBox[{
                RowBox[{"#", "<", "1"}], "&"}], ")"}]}], ",", "y_"}], "}"}], 
           ",", "Infinity"}], "]"}], "//", 
         RowBox[{
          RowBox[{
           RowBox[{
            RowBox[{"#", "[", 
             RowBox[{"[", "2", "]"}], "]"}], "&"}], "/@", "#"}], "&"}]}], "//",
         "Sort"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"(*", 
       RowBox[{"{", 
        RowBox[{
        "14.87747871852392`", ",", "1065.9532335053427`", ",", 
         "1697.087610020922`"}], "}"}], "*)"}], "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{
           RowBox[{"ImageTake", "[", 
            RowBox[{"i", ",", 
             RowBox[{"{", 
              RowBox[{
               RowBox[{"h", "-", 
                RowBox[{"tript", "[", 
                 RowBox[{"[", "2", "]"}], "]"}]}], ",", 
               RowBox[{"tript", "[", 
                RowBox[{"[", "3", "]"}], "]"}]}], "}"}]}], "]"}], "//", 
           "Binarize"}], "//", "ColorNegate"}], "//", 
         "DeleteBorderComponents"}], "//", 
        RowBox[{
         RowBox[{"DeleteSmallComponents", "[", 
          RowBox[{"#", ",", "17"}], "]"}], "&"}]}], "//", "imageCrop"}]}]}], 
    "\[IndentingNewLine]", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"takeSelectPart", "[", "i_", "]"}], ":=", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"h", ",", "nrow"}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"h", "=", 
       RowBox[{
        RowBox[{"ImageDimensions", "[", "i", "]"}], "[", 
        RowBox[{"[", "2", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"nrow", "=", 
       RowBox[{
        RowBox[{"h", "*", "0.37628458498023715`"}], "//", "Floor"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{
           RowBox[{"i", "//", 
            RowBox[{
             RowBox[{"ImageTake", "[", 
              RowBox[{"#", ",", 
               RowBox[{"{", 
                RowBox[{"nrow", ",", "h"}], "}"}]}], "]"}], "&"}]}], "//", 
           "Binarize"}], "//", "ColorNegate"}], "//", 
         "DeleteBorderComponents"}], "//", 
        RowBox[{
         RowBox[{"DeleteSmallComponents", "[", 
          RowBox[{"#", ",", "17"}], "]"}], "&"}]}], "//", "imageCrop"}]}]}], 
    "\[IndentingNewLine]", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"borderDimensionsLeftRightBottom", "[", "i_", "]"}], ":=", 
   RowBox[{
    RowBox[{"BorderDimensions", "@", "i"}], "//", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"#", "[", 
        RowBox[{"[", "1", "]"}], "]"}], ",", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"#", "[", 
          RowBox[{"[", 
           RowBox[{"2", ",", "1"}], "]"}], "]"}], ",", "0"}], "}"}]}], "}"}], 
     "&"}]}]}], ";", 
  RowBox[{"(*", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       StyleBox["left", "TI"], ",", 
       StyleBox["right", "TI"]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{
       StyleBox["bottom", "TI"], ",", 
       StyleBox["top", "TI"]}], "}"}]}], "}"}], "*)"}], "\n", 
  RowBox[{
   RowBox[{"imageCorpLeftRightBottom", "[", "i_", "]"}], ":=", 
   RowBox[{"ImagePad", "[", 
    RowBox[{"i", ",", 
     RowBox[{"-", 
      RowBox[{"borderDimensionsLeftRightBottom", "[", "i", "]"}]}]}], "]"}]}],
   ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"splitNMPart", "[", 
    RowBox[{"i_", ",", "nRow_", ",", "mCol_"}], "]"}], ":=", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"width", ",", "hight"}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{
       RowBox[{"{", 
        RowBox[{"width", ",", "hight"}], "}"}], "=", 
       RowBox[{"ImageDimensions", "[", "i", "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"ImagePartition", "[", 
       RowBox[{"i", ",", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"width", "/", "nRow"}], ",", 
          RowBox[{"hight", "/", "mCol"}]}], "}"}]}], "]"}]}]}], 
    "\[IndentingNewLine]", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"reconizeCards", "[", 
    RowBox[{"cards_", ",", "areaLargeThan_"}], "]"}], ":=", 
   RowBox[{"Module", "[", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "maxArea", ",", "maxAreaMatrix", ",", "bools2abcds", ",", "selectQ", 
       ",", "selectMatrixs", ",", "selectBoolMatrix", ",", "boolMatrix", ",", 
       "numberBoolMatrix", ",", "blmtri"}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{
       RowBox[{"maxArea", "[", "i_", "]"}], ":=", 
       RowBox[{
        RowBox[{"ComponentMeasurements", "[", 
         RowBox[{"i", ",", 
          RowBox[{"{", 
           RowBox[{"\"\<Shape\>\"", ",", "\"\<Area\>\""}], "}"}], ",", 
          RowBox[{"CornerNeighbors", "->", "False"}]}], "]"}], "//", 
        RowBox[{
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"#", "\[Equal]", 
            RowBox[{"{", "}"}]}], ",", "0", ",", 
           RowBox[{
            RowBox[{
             RowBox[{
              RowBox[{
               RowBox[{"#", "//", 
                RowBox[{
                 RowBox[{"SortBy", "[", 
                  RowBox[{"#", ",", 
                   RowBox[{
                    RowBox[{"#", "[", 
                    RowBox[{"[", 
                    RowBox[{"2", ",", "2"}], "]"}], "]"}], "&"}]}], "]"}], 
                 "&"}]}], "//", "Reverse"}], "//", "First"}], "//", 
             RowBox[{
              RowBox[{"#", "[", 
               RowBox[{"[", "2", "]"}], "]"}], "&"}]}], "//", 
            RowBox[{
             RowBox[{"#", "[", 
              RowBox[{"[", "2", "]"}], "]"}], "&"}]}]}], "]"}], "&"}]}]}], 
      ";", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"selectQ", "[", "area_", "]"}], ":=", 
       RowBox[{"area", ">", "areaLargeThan"}]}], 
      RowBox[{"(*", "250", "*)"}], ";", 
      RowBox[{"(*", 
       RowBox[{
        RowBox[{
         RowBox[{"250", "*", "w", "*", 
          RowBox[{"h", "/", 
           RowBox[{"(", 
            RowBox[{"1625", "*", "750"}], ")"}]}]}], "//", "N"}], "//", 
        "Floor"}], "*)"}], "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"bools2abcds", "[", "bools_", "]"}], ":=", 
       RowBox[{"With", "[", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"abcd", "=", 
           RowBox[{"{", 
            RowBox[{
            "\"\<A\>\"", ",", "\"\<B\>\"", ",", "\"\<C\>\"", ",", 
             "\"\<D\>\""}], "}"}]}], "}"}], ",", 
         RowBox[{
          RowBox[{"MapIndexed", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"If", "[", 
              RowBox[{
               RowBox[{"#1", "==", "True"}], ",", 
               RowBox[{"abcd", "[", 
                RowBox[{"[", 
                 RowBox[{"#2", "[", 
                  RowBox[{"[", "1", "]"}], "]"}], "]"}], "]"}], ",", "Null"}],
               "]"}], "&"}], ",", "bools"}], "]"}], "//", 
          RowBox[{
           RowBox[{"#", "/.", 
            RowBox[{"Null", "->", 
             RowBox[{"Sequence", "[", "]"}]}]}], "&"}]}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"selectMatrixs", "=", "cards"}], ";", "\[IndentingNewLine]", 
      RowBox[{"maxAreaMatrix", "=", 
       RowBox[{"selectMatrixs", "/.", 
        RowBox[{"x_Image", "\[RuleDelayed]", 
         RowBox[{"maxArea", "@", "x"}]}]}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"selectBoolMatrix", "=", 
       RowBox[{"Map", "[", 
        RowBox[{"selectQ", ",", "maxAreaMatrix", ",", 
         RowBox[{"{", "4", "}"}]}], "]"}]}], ";", 
      RowBox[{"(*", 
       RowBox[{
        RowBox[{"//", 
         RowBox[{
          RowBox[{"Map", "[", 
           RowBox[{"MatrixForm", ",", "#", ",", 
            RowBox[{"{", "2", "}"}]}], "]"}], "&"}]}], "//", "MatrixForm"}], 
       "*)"}], "\[IndentingNewLine]", 
      RowBox[{"boolMatrix", "=", 
       RowBox[{"selectBoolMatrix", "//", 
        RowBox[{
         RowBox[{"Map", "[", 
          RowBox[{"Transpose", ",", "#", ",", 
           RowBox[{"{", "2", "}"}]}], "]"}], "&"}]}]}], ";", 
      RowBox[{"(*", 
       RowBox[{"//", 
        RowBox[{
         RowBox[{"Map", "[", 
          RowBox[{"MatrixForm", ",", "#", ",", 
           RowBox[{"{", "2", "}"}]}], "]"}], "&"}]}], "*)"}], 
      "\[IndentingNewLine]", 
      RowBox[{"blmtri", "=", 
       RowBox[{"boolMatrix", "//", 
        RowBox[{
         RowBox[{"Flatten", "[", 
          RowBox[{"#", ",", "2"}], "]"}], "&"}]}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{
        RowBox[{"Map", "[", 
         RowBox[{"bools2abcds", ",", "blmtri"}], "]"}], "//", 
        RowBox[{
         RowBox[{"MapIndexed", "[", 
          RowBox[{
           RowBox[{
            RowBox[{
             RowBox[{"#2", "[", 
              RowBox[{"[", "1", "]"}], "]"}], "->", "#1"}], "&"}], ",", "#"}],
           "]"}], "&"}]}], "//", "TableForm"}]}]}], "\[IndentingNewLine]", 
    "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"selectPartOkQ", "[", "iSelect_", "]"}], ":=", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", "dim", "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"dim", "=", 
       RowBox[{"ImageDimensions", "@", "iSelect"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"dim", "//", 
        RowBox[{
         RowBox[{"Floor", "[", 
          RowBox[{
           RowBox[{"#", "[", 
            RowBox[{"[", "1", "]"}], "]"}], "/", 
           RowBox[{"#", "[", 
            RowBox[{"[", "2", "]"}], "]"}]}], "]"}], "&"}]}], "//", 
       RowBox[{
        RowBox[{"#", "\[Equal]", "2"}], "&"}]}]}]}], "\[IndentingNewLine]", 
    "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"widthHightRatio", "[", "i_", "]"}], ":=", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"dim", ",", "ratio"}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"dim", "=", 
       RowBox[{"ImageDimensions", "@", "i"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"ratio", "=", 
       RowBox[{
        RowBox[{"dim", "//", 
         RowBox[{
          RowBox[{
           RowBox[{"#", "[", 
            RowBox[{"[", "1", "]"}], "]"}], "/", 
           RowBox[{"#", "[", 
            RowBox[{"[", "2", "]"}], "]"}]}], "&"}]}], "//", "N"}]}]}]}], 
    "\[IndentingNewLine]", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"rectangleOkQ", "[", "irect_", "]"}], ":=", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{"1.31", "<=", 
       RowBox[{"widthHightRatio", "@", "irect"}], "\[LessEqual]", "1.32"}]}], 
     "\[IndentingNewLine]", "]"}]}], ";"}], "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"--", 
     RowBox[{"--", 
      RowBox[{"--", 
       RowBox[{"--", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", " ", 
                 RowBox[{
                  RowBox[{
                   RowBox[{
                    RowBox[{"distorOkQ", " ", "--"}], "--"}], "--"}], 
                  "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}], 
    RowBox[{"--", 
     RowBox[{"--", 
      RowBox[{"--", 
       RowBox[{"--", 
        RowBox[{"--", 
         RowBox[{"--", 
          RowBox[{"--", 
           RowBox[{"--", 
            RowBox[{"--", 
             RowBox[{"--", 
              RowBox[{"--", 
               RowBox[{"--", 
                RowBox[{"--", 
                 RowBox[{"--", 
                  RowBox[{"--", 
                   RowBox[{"--", "--"}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}], 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"horizonLines", "[", "i_", "]"}], ":=", 
  RowBox[{
   RowBox[{"horizonLinesImage", "[", "i", "]"}], "//", 
   RowBox[{
    RowBox[{"ImageLines", "[", 
     RowBox[{"#", ",", 
      RowBox[{"MaxFeatures", "\[Rule]", "1"}]}], "]"}], "&"}]}]}], "\n", 
 RowBox[{
  RowBox[{"verticalLines", "[", "i_", "]"}], ":=", 
  RowBox[{
   RowBox[{"verticalLinesImage", "[", "i", "]"}], "//", 
   RowBox[{
    RowBox[{"ImageLines", "[", 
     RowBox[{"#", ",", 
      RowBox[{"MaxFeatures", "\[Rule]", "1"}]}], "]"}], 
    "&"}]}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"argAbs", "[", "lines_", "]"}], ":=", 
  RowBox[{
   RowBox[{
    RowBox[{"Map", "[", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"#", "[", 
         RowBox[{"[", "2", "]"}], "]"}], "-", 
        RowBox[{"#", "[", 
         RowBox[{"[", "1", "]"}], "]"}]}], "&"}], ",", "lines"}], "]"}], "//", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"Arg", "[", 
        RowBox[{"Complex", "@@", "#"}], "]"}], "&"}], "/@", "#"}], "&"}]}], "//", 
   RowBox[{
    RowBox[{"Abs", "/@", "#"}], "&"}]}]}], "\n", 
 RowBox[{
  RowBox[{"degree", "[", "r_", "]"}], ":=", 
  RowBox[{
   RowBox[{"Degree", "/", "Pi"}], " ", "180", " ", "r"}]}], "\n", 
 RowBox[{
  RowBox[{"radians", " ", "[", "d_", "]"}], ":=", 
  RowBox[{
   RowBox[{"1", "/", "180"}], " ", "Pi", " ", "d"}]}], "\n", 
 RowBox[{
  RowBox[{"hArgOkQ", "[", "i_", "]"}], ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", "hlines", "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"hlines", "=", 
      RowBox[{"horizonLines", "@", "i"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{
       RowBox[{"argAbs", "@", "hlines"}], "//", 
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{"#", "<", "0.01"}], "&"}], "/@", "#"}], "&"}]}], "//", 
      RowBox[{
       RowBox[{"And", "@@", "#"}], "&"}]}]}]}], "\[IndentingNewLine]", 
   "]"}]}], "\n", 
 RowBox[{
  RowBox[{"vArgOkQ", "[", "i_", "]"}], ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", "vlines", "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"vlines", "=", 
      RowBox[{"verticalLines", "@", "i"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{
       RowBox[{"argAbs", "@", "vlines"}], "//", 
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{
           RowBox[{"Abs", "[", 
            RowBox[{"#", "-", 
             RowBox[{"90", " ", "Degree"}]}], "]"}], "<", "0.01"}], "&"}], "/@",
          "#"}], "&"}]}], "//", 
      RowBox[{
       RowBox[{"And", "@@", "#"}], "&"}]}]}]}], "\[IndentingNewLine]", 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"showDistorRatio", "[", "irectangle_", "]"}], ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
     "ihoriz", ",", "ivertical", ",", "hlines", ",", "vlines", ",", "hargs", 
      ",", "vargs"}], "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"ihoriz", "=", 
      RowBox[{"horizonLinesImage", "[", "irectangle", "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"ivertical", "=", 
      RowBox[{"verticalLinesImage", "[", "irectangle", "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"hlines", "=", 
      RowBox[{"ImageLines", "[", 
       RowBox[{"ihoriz", ",", 
        RowBox[{"MaxFeatures", "\[Rule]", "1"}]}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"vlines", "=", 
      RowBox[{"ImageLines", "[", 
       RowBox[{"ivertical", ",", 
        RowBox[{"MaxFeatures", "\[Rule]", "1"}]}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"hargs", "=", 
      RowBox[{"argAbs", "[", "hlines", "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"vargs", "=", 
      RowBox[{"argAbs", "[", "vlines", "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"{", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"hargs", ",", 
         RowBox[{"Show", "[", 
          RowBox[{"irectangle", ",", 
           RowBox[{"Graphics", "[", 
            RowBox[{"{", 
             RowBox[{"Thick", ",", "Red", ",", 
              RowBox[{"Line", "/@", "hlines"}]}], "}"}], "]"}]}], "]"}]}], 
        "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{"vargs", ",", 
         RowBox[{"Show", "[", 
          RowBox[{"irectangle", ",", 
           RowBox[{"Graphics", "[", 
            RowBox[{"{", 
             RowBox[{"Thick", ",", "Red", ",", 
              RowBox[{"Line", "/@", "vlines"}]}], "}"}], "]"}]}], "]"}]}], 
        "}"}]}], "\[IndentingNewLine]", "}"}]}]}], "\[IndentingNewLine]", 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"distorOkQ", "[", "i_", "]"}], ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", "type", "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"type", "=", 
      RowBox[{"ImageType", "@", "i"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"(", 
       RowBox[{
        RowBox[{"type", "==", "\"\<Bit\>\""}], " ", "||", " ", 
        RowBox[{"type", "==", "\"\<Byte\>\""}]}], ")"}], "&&", 
      "\[IndentingNewLine]", 
      RowBox[{"hArgOkQ", "@", "i"}], "&&", "\[IndentingNewLine]", 
      RowBox[{"vArgOkQ", "@", "i"}]}]}]}], "\[IndentingNewLine]", 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"cardsOkQ", "[", "icards_", "]"}], ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"cards", ",", "ratio"}], "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{"(*", 
     RowBox[{
      RowBox[{
       RowBox[{"ratio", "[", "i_", "]"}], ":=", 
       RowBox[{"1.8", "<=", 
        RowBox[{"widthHightRatio", "@", "i"}], "\[LessEqual]", "1.97"}]}], 
      ";"}], "*)"}], "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{
      RowBox[{"ratio", "[", "i_", "]"}], ":=", 
      RowBox[{"1.7", "<=", 
       RowBox[{"widthHightRatio", "@", "i"}], "\[LessEqual]", "2.1"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"(*", 
      RowBox[{"1.7", "<=", 
       RowBox[{"widthHightRatio", "@", "i"}], "\[LessEqual]", "1.99"}], 
      "*)"}], "\[IndentingNewLine]", 
     RowBox[{"cards", "=", 
      RowBox[{"icards", "//", "Flatten"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"ratio", "/@", "cards"}], "//", 
      RowBox[{
       RowBox[{"And", "@@", "#"}], "&"}]}]}]}], "\[IndentingNewLine]", 
   RowBox[{"(*", 
    RowBox[{"widthHightRatio", "/@", "cards"}], "*)"}], "\[IndentingNewLine]",
    "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"doReconize", "[", "imagename_", "]"}], ":=", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "fname", ",", "dirname", ",", "nameselect", ",", "iorig", ",", "i", ",",
        "iselect", ",", "w", ",", "h", ",", "cards", ",", "cards2", ",", 
       "ansers", ",", "areaLargeThan"}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"fname", "=", 
       RowBox[{"filename", "@", "imagename"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"dirname", "=", 
       RowBox[{"\"\<select/\>\"", "<>", "fname", "<>", "\"\</\>\""}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"SetDirectory", "@", 
       RowBox[{"NotebookDirectory", "[", "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"(*", 
       RowBox[{
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"FileExistsQ", "[", "\"\<select\>\"", "]"}], ",", 
          RowBox[{"DeleteDirectory", "[", 
           RowBox[{"\"\<select\>\"", ",", 
            RowBox[{"DeleteContents", "\[Rule]", "True"}]}], "]"}], ",", 
          "Null"}], "]"}], ";"}], "*)"}], "\[IndentingNewLine]", 
      RowBox[{"CreateDirectory", "[", "dirname", "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"(*", 
       RowBox[{
        RowBox[{"nameselect", "=", 
         RowBox[{
          RowBox[{"filename", "@", "imagename"}], "//", 
          RowBox[{
           RowBox[{
            RowBox[{
             RowBox[{"\"\<select/\>\"", "<>", "#", "<>", "\"\<.jpg\>\""}], 
             "&"}], "/@", "#"}], "&"}]}]}], ";"}], "*)"}], 
      "\[IndentingNewLine]", 
      RowBox[{"iorig", "=", 
       RowBox[{"Import", "[", "imagename", "]"}]}], ";", 
      "\[IndentingNewLine]", "  ", 
      RowBox[{"i", "=", 
       RowBox[{"(*", "imageTakeRectangle", "*)"}], 
       RowBox[{"imageTakeRectangle3", "[", "iorig", "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"Export", "[", 
       RowBox[{
        RowBox[{"dirname", "<>", "\"\<rectangle.jpg\>\""}], ",", "i"}], "]"}],
       ";", "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"rectangleOkQ", "[", "i", "]"}], ",", "Null", ",", 
        RowBox[{"Return", "[", "$Failed", "]"}]}], "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"distorOkQ", "[", "i", "]"}], ",", "Null", ",", 
        RowBox[{"Return", "[", "$Failed", "]"}]}], "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"iselect", "=", 
       RowBox[{"(*", 
        RowBox[{"imageSelect", "[", "i", "]"}], "*)"}], 
       RowBox[{"takeSelectPart", "[", "i", "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"Export", "[", 
       RowBox[{
        RowBox[{"dirname", "<>", "\"\<select.jpg\>\""}], ",", "iselect"}], 
       "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"selectPartOkQ", "[", "iselect", "]"}], ",", "Null", ",", 
        RowBox[{"Return", "[", "$Failed", "]"}]}], "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"w", ",", "h"}], "}"}], "=", 
       RowBox[{"ImageDimensions", "[", "iselect", "]"}]}], ";", 
      RowBox[{"(*", 
       RowBox[{
        RowBox[{
         RowBox[{"250", "*", "w", "*", 
          RowBox[{"h", "/", 
           RowBox[{"(", 
            RowBox[{"1625", "*", "750"}], ")"}]}]}], "//", "N"}], "//", 
        "Floor"}], "*)"}], "\[IndentingNewLine]", 
      RowBox[{"areaLargeThan", "=", 
       RowBox[{
        RowBox[{
         RowBox[{"(", 
          RowBox[{"250", "*", "w", "*", 
           RowBox[{"h", "/", 
            RowBox[{"(", 
             RowBox[{"1625", "*", "750"}], ")"}]}]}], ")"}], "//", "N"}], "//",
         "Floor"}]}], ";", 
      RowBox[{
      "(*", "\:6d82\:9ed1\:7684\:9762\:79ef\:5927\:4e8e\:8fd9\:4e2a\:6570\
\:503c\:5219\:8ba4\:4e3a\:662f\:6709\:6548\:9009\:9879", "*)"}], "\n", 
      "       ", 
      RowBox[{"cards", "=", 
       RowBox[{
        RowBox[{
         RowBox[{"ImagePartition", "[", 
          RowBox[{"iselect", ",", 
           RowBox[{"{", 
            RowBox[{
             RowBox[{"w", "/", "4"}], ",", 
             RowBox[{"h", "/", "4"}]}], "}"}]}], "]"}], "//", 
         RowBox[{
          RowBox[{"#", "/.", 
           RowBox[{"x_Image", "\[RuleDelayed]", 
            RowBox[{"DeleteSmallComponents", "[", 
             RowBox[{"x", ",", "21"}], "]"}]}]}], "&"}]}], "//", 
        RowBox[{
         RowBox[{"#", "/.", 
          RowBox[{"x_Image", "\[RuleDelayed]", 
           RowBox[{"(*", "imageCrop", "*)"}], 
           RowBox[{"imageCorpLeftRightBottom", "[", "x", "]"}]}]}], "&"}]}]}],
       ";", "\[IndentingNewLine]", 
      RowBox[{"Export", "[", 
       RowBox[{
        RowBox[{"dirname", "<>", "\"\<cards.jpg\>\""}], ",", 
        RowBox[{"Rasterize", "[", 
         RowBox[{"cards", "//", "MatrixForm"}], "]"}]}], "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"cardsOkQ", "[", "cards", "]"}], ",", "Null", ",", 
        RowBox[{"Return", "[", "$Failed", "]"}]}], "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"cards2", "=", 
       RowBox[{"Map", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"(", 
           RowBox[{
            RowBox[{"splitNMPart", "[", 
             RowBox[{"#", ",", "5", ",", "5"}], "]"}], "//", "Rest"}], ")"}], 
          "&"}], ",", "cards", ",", 
         RowBox[{"{", "2", "}"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"Export", "[", 
       RowBox[{
        RowBox[{"dirname", "<>", "\"\<cards2.jpg\>\""}], ",", 
        RowBox[{"Rasterize", "[", 
         RowBox[{
          RowBox[{"cards2", "//", 
           RowBox[{
            RowBox[{"Map", "[", 
             RowBox[{"MatrixForm", ",", "#", ",", 
              RowBox[{"{", "2", "}"}]}], "]"}], "&"}]}], "//", "MatrixForm"}],
          "]"}]}], "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"ansers", "=", 
       RowBox[{"reconizeCards", "[", 
        RowBox[{"cards2", ",", "areaLargeThan"}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"Export", "[", 
       RowBox[{
        RowBox[{"dirname", "<>", "\"\<ansers.jpg\>\""}], ",", 
        RowBox[{"Rasterize", "[", "ansers", "]"}]}], "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"{", 
       RowBox[{"(*", 
        RowBox[{
         RowBox[{"cardsOkQ", "[", "cards", "]"}], ","}], "*)"}], 
       RowBox[{"(*", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{"w", ",", "h"}], "}"}], ","}], "*)"}], 
       RowBox[{"(*", "areaLargeThan", "*)"}], 
       RowBox[{"i", ",", "iselect", ",", 
        RowBox[{"cards", "//", "MatrixForm"}], ",", 
        RowBox[{
         RowBox[{"cards2", "//", 
          RowBox[{
           RowBox[{"Map", "[", 
            RowBox[{"MatrixForm", ",", "#", ",", 
             RowBox[{"{", "2", "}"}]}], "]"}], "&"}]}], "//", "MatrixForm"}], 
        ",", "ansers"}], "}"}]}]}], 
    RowBox[{"(*", 
     RowBox[{"//", "Column"}], "*)"}], "\[IndentingNewLine]", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"errorPrint", "[", "imagename_", "]"}], ":=", 
   RowBox[{"If", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"doReconize", "[", "imagename", "]"}], "===", "$Failed"}], ",", 
     "imagename", ",", "Null"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"SetDirectory", "@", 
   RowBox[{"NotebookDirectory", "[", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"imagenames", "=", 
   RowBox[{"FileNames", "[", "\"\<scan/*.bmp\>\"", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"If", "[", 
   RowBox[{
    RowBox[{"FileExistsQ", "[", "\"\<select\>\"", "]"}], ",", 
    RowBox[{"DeleteDirectory", "[", 
     RowBox[{"\"\<select\>\"", ",", 
      RowBox[{"DeleteContents", "\[Rule]", "True"}]}], "]"}], ",", "Null"}], 
   "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"r", "=", 
   RowBox[{
    RowBox[{"Table", "[", 
     RowBox[{
      RowBox[{
       RowBox[{"imagenames", "[", 
        RowBox[{"[", "i", "]"}], "]"}], "//", "errorPrint"}], ",", 
      RowBox[{"{", 
       RowBox[{"i", ",", "1", ",", 
        RowBox[{"Length", "[", "imagenames", "]"}]}], "}"}]}], "]"}], "//", 
    "AbsoluteTiming"}]}], "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"doReconize", "@", "\"\<scan/0070.bmp\>\""}], "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"r", "//", "Rest"}], "//", "Rest"}], "//", "First"}], "//", 
     "Flatten"}], "//", 
    RowBox[{
     RowBox[{"widthHightRatio", "/@", "#"}], "&"}]}], "*)"}], 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"Map", "[", 
     RowBox[{"widthHightRatio", ",", "#", ",", 
      RowBox[{"{", "2", "}"}]}], "]"}], "&"}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"doReconize", "@", "\"\<scan/0013.bmp\>\""}], 
   "*)"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"(*", 
   RowBox[{"errorPrint", "[", "\"\<scan/0012.bmp\>\"", "]"}], 
   "*)"}]}]}], "Input",
 CellChangeTimes->{{3.626645033442898*^9, 3.6266450679498715`*^9}, {
   3.6266451037579193`*^9, 3.6266451904588785`*^9}, {3.62664531339291*^9, 
   3.6266453290988083`*^9}, {3.626645575944927*^9, 3.6266456363613825`*^9}, {
   3.626645826206241*^9, 3.626645851591693*^9}, {3.6266459526194715`*^9, 
   3.626645957062726*^9}, {3.6266459948088846`*^9, 3.6266460088206863`*^9}, {
   3.6266462142964387`*^9, 3.6266462617101507`*^9}, {3.6266462939729958`*^9, 
   3.6266463099439096`*^9}, {3.62664699880331*^9, 3.626647073443579*^9}, {
   3.626647169758088*^9, 3.6266472099963894`*^9}, {3.626647286346757*^9, 
   3.6266473164324775`*^9}, {3.6266474949626884`*^9, 
   3.6266474962947645`*^9}, {3.626647527434546*^9, 3.6266476250181274`*^9}, 
   3.6266479535289173`*^9, {3.626648011847253*^9, 3.626648049491406*^9}, {
   3.626648300336754*^9, 3.626648302511878*^9}, {3.6266483390119658`*^9, 
   3.626648409055972*^9}, {3.626648624196277*^9, 3.6266486404642076`*^9}, {
   3.6266487022727427`*^9, 3.626648704038844*^9}, {3.6266491406668177`*^9, 
   3.6266491424279184`*^9}, {3.6266492025923595`*^9, 3.626649291231429*^9}, {
   3.626649393678289*^9, 3.626649394549339*^9}, {3.6266512631072145`*^9, 
   3.626651318843402*^9}, {3.626651371828433*^9, 3.6266514066164227`*^9}, {
   3.6266514408863826`*^9, 3.626651462284607*^9}, {3.6266610331600294`*^9, 
   3.6266610603255835`*^9}, {3.626661127134404*^9, 3.626661166832675*^9}, {
   3.62666141134566*^9, 3.6266614147628555`*^9}, {3.626661720522344*^9, 
   3.6266617515051165`*^9}, {3.626662087481333*^9, 3.6266620887474055`*^9}, {
   3.6266629722179375`*^9, 3.6266629735880156`*^9}, {3.6266631748755283`*^9, 
   3.626663338093864*^9}, {3.626663373064864*^9, 3.6266633877027016`*^9}, {
   3.626663582996872*^9, 3.626663612080535*^9}, {3.6266637905087404`*^9, 
   3.6266638191363783`*^9}, {3.626663894106666*^9, 3.6266638946987*^9}, {
   3.62666392494343*^9, 3.626663958211333*^9}, {3.626664024030097*^9, 
   3.626664086041644*^9}, {3.6266645602567673`*^9, 3.6266645683892326`*^9}, {
   3.626664788120801*^9, 3.6266647886568317`*^9}, {3.6266648528355026`*^9, 
   3.626664853211524*^9}, {3.626664904599463*^9, 3.626664911616864*^9}, 
   3.626665872632831*^9, 3.6266698005664964`*^9, {3.6266698349774647`*^9, 
   3.626669842577899*^9}, {3.626669930429924*^9, 3.626669934309146*^9}, {
   3.6266701011416883`*^9, 3.6266701016177154`*^9}, {3.626670475829119*^9, 
   3.626670488291832*^9}, {3.6266708452232475`*^9, 3.626670920390547*^9}, {
   3.6266709573326597`*^9, 3.6266709729625535`*^9}, {3.6266710119147816`*^9, 
   3.6266710427205434`*^9}, {3.6266711031379995`*^9, 3.62667112203608*^9}, {
   3.626671197083372*^9, 3.6266712037157516`*^9}, {3.626672866400852*^9, 
   3.626672886771017*^9}, {3.6267328087837744`*^9, 3.626732822402553*^9}, {
   3.62673674389285*^9, 3.6267367969788857`*^9}, {3.626736849172871*^9, 
   3.626736855914257*^9}, 3.6267370468331766`*^9, {3.626737749134346*^9, 
   3.626737775746868*^9}, {3.6267389935625234`*^9, 3.6267389943335676`*^9}, {
   3.626739159537017*^9, 3.6267391638722644`*^9}, {3.6267477491343136`*^9, 
   3.626747758934874*^9}, {3.6267479315577474`*^9, 3.6267479389711714`*^9}, 
   3.6267480434551477`*^9, {3.626748190024531*^9, 3.6267482101986847`*^9}, {
   3.626748329302497*^9, 3.626748330293554*^9}, {3.6267486481657352`*^9, 
   3.6267487122844024`*^9}, {3.6267488732216077`*^9, 
   3.6267489096586914`*^9}, {3.6267500900912085`*^9, 
   3.6267500910222616`*^9}, {3.6267501265432935`*^9, 
   3.6267502176235027`*^9}, {3.626750252557501*^9, 3.6267502919527545`*^9}, {
   3.6267505429861126`*^9, 3.626750548803445*^9}, 3.6267506299860888`*^9, {
   3.626751069510228*^9, 3.626751095629722*^9}, {3.626751286151619*^9, 
   3.626751303788628*^9}, {3.62675150068389*^9, 3.626751518292897*^9}, 
   3.6267516443021045`*^9, 3.6267517059516306`*^9, {3.6267518148428583`*^9, 
   3.626751829796714*^9}, {3.626751948024476*^9, 3.6267519512666616`*^9}, {
   3.6267519914239583`*^9, 3.6267520152643223`*^9}, 3.6267520863763895`*^9, {
   3.626755987045495*^9, 3.626755987425517*^9}, {3.626756240256978*^9, 
   3.626756281795354*^9}, {3.6267564088626213`*^9, 3.6267564114527693`*^9}, {
   3.626756525598298*^9, 3.6267565265753546`*^9}, {3.626756692958871*^9, 
   3.626756694205942*^9}, {3.626756923844077*^9, 3.626756925024144*^9}, {
   3.6267570113050795`*^9, 3.6267570137772207`*^9}, {3.626757109469694*^9, 
   3.626757157000413*^9}, {3.626757455342477*^9, 3.626757456517544*^9}, {
   3.6267577547936044`*^9, 3.626757796097967*^9}, {3.626757826679716*^9, 
   3.6267578273537545`*^9}, {3.6267578808238125`*^9, 
   3.6267578819688787`*^9}, {3.626757937962081*^9, 3.626757939135148*^9}, {
   3.62675798357769*^9, 3.6267579863468485`*^9}, {3.626758037375767*^9, 
   3.626758038634839*^9}, {3.6267588920816536`*^9, 3.6267588965199075`*^9}, {
   3.626759102026662*^9, 3.62675910251869*^9}, {3.626759189186647*^9, 
   3.6267591926738462`*^9}, 3.6269901135361137`*^9, {3.626990153755414*^9, 
   3.6269901951187797`*^9}, {3.6269902353500805`*^9, 3.626990237981231*^9}, {
   3.626990449191312*^9, 3.6269904544116106`*^9}, {3.626995779659197*^9, 
   3.626995793448986*^9}, {3.6269973237305126`*^9, 3.626997331392951*^9}, {
   3.626997362869752*^9, 3.626997385828065*^9}, {3.626998620997712*^9, 
   3.6269986215797453`*^9}, {3.62699927047186*^9, 3.6269994077787137`*^9}, 
   3.626999445016844*^9, 3.6270074278104334`*^9, {3.627007513016307*^9, 
   3.627007646948967*^9}, {3.627007722664298*^9, 3.627007771883113*^9}, {
   3.6270078083051963`*^9, 3.627007875528041*^9}, {3.6270160341126857`*^9, 
   3.627016039766009*^9}, {3.6271861059212365`*^9, 3.627186124532301*^9}, {
   3.6271861616704254`*^9, 3.6271861789824157`*^9}, 3.62718843216529*^9, {
   3.627188725610074*^9, 3.627188729632304*^9}, {3.6273377972744856`*^9, 
   3.627337799012585*^9}, 3.6273378506075363`*^9, {3.6273379369264736`*^9, 
   3.6273379411517153`*^9}, 3.627338163990461*^9, {3.627338257702821*^9, 
   3.6273382717666254`*^9}, {3.6273384260074472`*^9, 
   3.6273384469646463`*^9}, {3.6273387240744953`*^9, 3.627338748524894*^9}, 
   3.6273387797716813`*^9, {3.6273388824305534`*^9, 3.627338885100706*^9}, {
   3.6273389676734285`*^9, 3.6273389925628524`*^9}, {3.627339037311412*^9, 
   3.6273390449268475`*^9}, {3.627343144091306*^9, 3.6273431601662254`*^9}, 
   3.6273433470269136`*^9}],

Cell[BoxData[
 RowBox[{"oldnames", "=", 
  RowBox[{"Select", "[", 
   RowBox[{
    RowBox[{"r", "[", 
     RowBox[{"[", "2", "]"}], "]"}], ",", 
    RowBox[{
     RowBox[{"#", "=!=", "Null"}], "&"}]}], "]"}]}]], "Input",
 CellChangeTimes->{{3.6270183569835463`*^9, 3.6270183943996863`*^9}, {
   3.6270184267645373`*^9, 3.6270184287086487`*^9}, {3.6270185460553603`*^9, 
   3.6270185492715445`*^9}, {3.627018588090765*^9, 3.6270186227567472`*^9}, 
   3.6270187004541917`*^9, {3.6270189809612355`*^9, 3.6270189829493494`*^9}, 
   3.6271918457785378`*^9}],

Cell[BoxData[
 RowBox[{"Length", "@", "oldnames"}]], "Input",
 CellChangeTimes->{{3.6271918572351933`*^9, 3.627191861125416*^9}}],

Cell[BoxData[
 RowBox[{"newnames", "=", 
  RowBox[{
   RowBox[{"filename", "/@", 
    RowBox[{"Select", "[", 
     RowBox[{
      RowBox[{"r", "[", 
       RowBox[{"[", "2", "]"}], "]"}], ",", 
      RowBox[{
       RowBox[{"#", "=!=", "Null"}], "&"}]}], "]"}]}], "//", 
   RowBox[{
    RowBox[{
     RowBox[{
      RowBox[{"\"\<bad/\>\"", "<>", "#", "<>", "\"\<.bmp\>\""}], "&"}], "/@", 
     "#"}], "&"}]}]}]], "Input",
 CellChangeTimes->{{3.6270188794684305`*^9, 3.6270189765509834`*^9}, 
   3.627192663457306*^9}],

Cell[BoxData[
 RowBox[{"Table", "[", 
  RowBox[{
   RowBox[{"CopyFile", "[", 
    RowBox[{
     RowBox[{"oldnames", "[", 
      RowBox[{"[", "i", "]"}], "]"}], ",", 
     RowBox[{"newnames", "[", 
      RowBox[{"[", "i", "]"}], "]"}]}], "]"}], ",", 
   RowBox[{"{", 
    RowBox[{"i", ",", "1", ",", 
     RowBox[{"Length", "@", "oldnames"}]}], "}"}]}], "]"}]], "Input",
 CellChangeTimes->{{3.6270188423953104`*^9, 3.6270188559100833`*^9}, {
   3.627018991022811*^9, 3.627019065584076*^9}, 3.6271927693943653`*^9}],

Cell[BoxData[
 RowBox[{"BottomHatTransform", "[", 
  RowBox[{
   RowBox[{"Import", "@", "\"\<scan/0001.bmp\>\""}], ",", "2"}], 
  "]"}]], "Input",
 CellChangeTimes->{
  3.6270771785899496`*^9, 3.627077249274993*^9, {3.6270773097994547`*^9, 
   3.6270773301046157`*^9}, {3.6270774061199636`*^9, 3.627077406704997*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"thinDarkFree", "[", "i_", "]"}], ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", "thinDark", "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{"(*", 
     RowBox[{
      RowBox[{"Extract", " ", "thin"}], ",", 
      RowBox[{"dark", " ", 
       RowBox[{"features", ":"}]}]}], "*)"}], "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"thinDark", "=", 
      RowBox[{"BottomHatTransform", "[", 
       RowBox[{"i", ",", " ", 
        RowBox[{"DiskMatrix", "[", "2", "]"}]}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"(*", 
      RowBox[{
      "Add", " ", "the", " ", "result", " ", "to", " ", "the", " ", 
       "original", " ", "image", " ", "to", " ", "remove", " ", "those", " ", 
       "thin", " ", 
       RowBox[{"features", ":"}]}], "*)"}], "\[IndentingNewLine]", 
     RowBox[{"ImageAdd", "[", 
      RowBox[{"i", ",", "thinDark"}], "]"}]}]}], "\[IndentingNewLine]", 
   "]"}]}]], "Input"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"extractBorder", "[", "i_", "]"}], ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"rectangle", ",", "rect"}], "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"rectangle", "=", 
      RowBox[{
       RowBox[{"DeleteBorderComponents", "[", 
        RowBox[{
         RowBox[{"i", "//", "Binarize"}], "//", "ColorNegate"}], "]"}], "//", 
       "DeleteSmallComponents"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"mask", "=", 
      RowBox[{
       RowBox[{"rectangle", "//", "FillingTransform"}], "//", 
       "ColorNegate"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"rect", "=", 
      RowBox[{
       RowBox[{
        RowBox[{"ImageSubtract", "[", 
         RowBox[{"i", ",", "mask"}], "]"}], "//", "imageCrop"}], "//", 
       "Binarize"}]}]}]}], "\[IndentingNewLine]", 
   "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"SetDirectory", "@", 
   RowBox[{"NotebookDirectory", "[", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"imagenames", "=", 
   RowBox[{"FileNames", "[", "\"\<scan/*.bmp\>\"", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"If", "[", 
   RowBox[{
    RowBox[{"FileExistsQ", "[", "\"\<select\>\"", "]"}], ",", 
    RowBox[{"DeleteDirectory", "[", 
     RowBox[{"\"\<select\>\"", ",", 
      RowBox[{"DeleteContents", "\[Rule]", "True"}]}], "]"}], ",", "Null"}], 
   "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"CreateDirectory", "[", "\"\<select\>\"", "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"(*", 
   RowBox[{"Table", "[", 
    RowBox[{
     RowBox[{"Export", "[", 
      RowBox[{
       RowBox[{"\"\<select/\>\"", "<>", 
        RowBox[{"filename", "@", 
         RowBox[{"imagenames", "[", 
          RowBox[{"[", "i", "]"}], "]"}]}], "<>", "\"\<.jpg\>\""}], ",", 
       RowBox[{"extractBorder", "[", 
        RowBox[{"Import", "@", 
         RowBox[{"imagenames", "[", 
          RowBox[{"[", "i", "]"}], "]"}]}], "]"}]}], "]"}], ",", 
     RowBox[{"{", 
      RowBox[{"i", ",", "1", ",", "20"}], "}"}]}], "]"}], "*)"}]}]}], "Input",
 CellChangeTimes->{{3.6271697340418186`*^9, 3.6271697757322035`*^9}, {
  3.6271698133633556`*^9, 3.627169819172688*^9}, {3.627169995978801*^9, 
  3.6271701306485033`*^9}, {3.6271813398936357`*^9, 3.627181347735084*^9}, {
  3.6271814840058784`*^9, 3.6271815038540134`*^9}, {3.6271817946066437`*^9, 
  3.6271818005829854`*^9}, {3.627182024324783*^9, 3.627182067241237*^9}, {
  3.627183392946063*^9, 3.6271834066218452`*^9}, {3.6271834455910745`*^9, 
  3.6271834673803205`*^9}, {3.627183513452956*^9, 3.6271835197913184`*^9}, {
  3.627184667889986*^9, 3.6271846787506075`*^9}, {3.6271857091465425`*^9, 
  3.627185725168459*^9}, {3.6271858644904275`*^9, 3.627185887761759*^9}}],

Cell[BoxData[""], "Input",
 CellChangeTimes->{{3.6271849094148006`*^9, 3.6271849449428325`*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{"i", "=", 
   RowBox[{"Import", "@", 
    RowBox[{"imagenames", "[", 
     RowBox[{"[", "70", "]"}], "]"}]}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"rec", "=", 
  RowBox[{"extractBorder", "[", "i", "]"}]}], "\[IndentingNewLine]", 
 RowBox[{"iselect", "=", 
  RowBox[{"(*", 
   RowBox[{"imageSelect", "[", "i", "]"}], "*)"}], 
  RowBox[{"takeSelectPart", "[", "rec", "]"}]}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"mask", "=", 
     RowBox[{
      RowBox[{"extractBorder", "[", 
       RowBox[{"Import", "@", 
        RowBox[{"imagenames", "[", 
         RowBox[{"[", "1", "]"}], "]"}]}], "]"}], "//", "ColorNegate"}]}], 
    ";", "\[IndentingNewLine]", 
    RowBox[{"rect", "=", 
     RowBox[{
      RowBox[{
       RowBox[{"ImageSubtract", "[", 
        RowBox[{"i", ",", "mask"}], "]"}], "//", 
       RowBox[{"imageCrop", "\[IndentingNewLine]", "rect"}]}], "//", 
      "Binarize"}]}]}], "*)"}]}]}], "Input",
 CellChangeTimes->{{3.627182009189917*^9, 3.6271820092179184`*^9}, {
  3.627184686931075*^9, 3.6271847105114236`*^9}, {3.6271848626981287`*^9, 
  3.6271848670363765`*^9}, {3.627184938239449*^9, 3.6271849527952814`*^9}, {
  3.6271850109086056`*^9, 3.627185019135076*^9}, {3.627185137033819*^9, 
  3.62718514805145*^9}, {3.6271854130566072`*^9, 3.627185438120041*^9}, {
  3.6271855664343796`*^9, 3.627185566841403*^9}, {3.6271859483342233`*^9, 
  3.627185950390341*^9}, {3.627335663077417*^9, 3.627335664780514*^9}, {
  3.627336161307914*^9, 3.6273361880374427`*^9}, {3.6273374308445272`*^9, 
  3.6273374433742437`*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"orig", "=", 
   RowBox[{"Import", "@", "\"\<scan/0001.bmp\>\""}]}], ";"}]], "Input",
 CellChangeTimes->{{3.627095100403019*^9, 3.6270951220142546`*^9}, {
  3.6271655473503537`*^9, 3.6271655541297417`*^9}}],

Cell[BoxData[
 RowBox[{"MaxDetect", "[", 
  RowBox[{"orig", ",", ".5"}], "]"}]], "Input",
 CellChangeTimes->{{3.6271655891507444`*^9, 3.627165618739437*^9}, {
  3.62716891216581*^9, 3.6271689166110644`*^9}}],

Cell[BoxData[{
 RowBox[{
  RowBox[{"image", "=", "orig"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"DeleteBorderComponents", "[", 
    RowBox[{
     RowBox[{"image", "//", "Binarize"}], "//", "ColorNegate"}], "]"}], "//", 
   "DeleteSmallComponents"}], "\n", 
  RowBox[{"(*", 
   RowBox[{"n", "=", 
    RowBox[{"TotalVariationFilter", "[", 
     RowBox[{"image", ",", "0.05"}], "]"}]}], "*)"}]}], "\n", 
 RowBox[{
  RowBox[{"(*", 
   RowBox[{"b", "=", 
    RowBox[{"LocalAdaptiveBinarize", "[", 
     RowBox[{"image", ",", "50"}], "]"}]}], "*)"}], 
  RowBox[{"(*", "\n", 
   RowBox[{
    RowBox[{"s", "=", 
     RowBox[{
      RowBox[{
       RowBox[{
        RowBox[{"DeleteSmallComponents", "[", 
         RowBox[{
          RowBox[{"ColorNegate", "[", 
           RowBox[{"DeleteSmallComponents", "[", 
            RowBox[{"b", ",", 
             RowBox[{"20", "^", "2"}]}], "]"}], "]"}], ",", 
          RowBox[{"20", "^", "2"}]}], "]"}], "\n", 
        RowBox[{"(", 
         RowBox[{"d", "=", 
          RowBox[{"DistanceTransform", "[", "s", "]"}]}], ")"}]}], "//", 
       RowBox[{"ImageAdjust", "\n", "m"}]}], "=", 
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{"MaxDetect", "[", 
          RowBox[{"d", ",", "10"}], "]"}], "\n", 
         RowBox[{"(", 
          RowBox[{"w", "=", 
           RowBox[{"WatershedComponents", "[", 
            RowBox[{
             RowBox[{"ColorNegate", "[", "d", "]"}], ",", "m"}], "]"}]}], 
          ")"}]}], "//", 
        RowBox[{"Colorize", "\n", "c"}]}], "=", 
       RowBox[{"ComponentMeasurements", "[", 
        RowBox[{"w", ",", 
         RowBox[{"{", 
          RowBox[{"\"\<Centroid\>\"", ",", "\"\<EquivalentDiskRadius\>\""}], 
          "}"}], ",", 
         RowBox[{
          RowBox[{"#2", "<", "50"}], "&"}]}], "]"}]}]}]}], ";", "\n", 
    RowBox[{"Show", "[", 
     RowBox[{"image", ",", 
      RowBox[{"Graphics", "[", 
       RowBox[{"{", 
        RowBox[{"Thick", ",", "Red", ",", 
         RowBox[{"Circle", "@@@", 
          RowBox[{"c", "[", 
           RowBox[{"[", 
            RowBox[{"All", ",", "2"}], "]"}], "]"}]}]}], "}"}], "]"}], ",", 
      RowBox[{"ImageSize", "\[Rule]", "1280"}]}], "]"}]}], "*)"}]}]}], "Input",
 CellChangeTimes->{{3.6271692381194534`*^9, 3.627169238140455*^9}, {
  3.627169332939877*^9, 3.627169359357388*^9}, {3.627169403195895*^9, 
  3.6271694304864564`*^9}, {3.627169500187443*^9, 3.627169550105298*^9}, {
  3.627169596486951*^9, 3.6271696003251705`*^9}}],

Cell[BoxData[
 RowBox[{"(*", 
  RowBox[{"doReconize", "[", 
   RowBox[{"imagenames", "[", 
    RowBox[{"[", "1", "]"}], "]"}], "]"}], "*)"}]], "Input",
 CellChangeTimes->{{3.6269986849863725`*^9, 3.6269986880815496`*^9}, 
   3.6269994236846237`*^9, 3.6270093624740896`*^9, 3.627009777394822*^9}],

Cell[BoxData[
 RowBox[{"(*", 
  RowBox[{
   RowBox[{"Select", "[", 
    RowBox[{"r", ",", 
     RowBox[{
      RowBox[{"#", "=!=", "Null"}], "&"}]}], "]"}], "//", "Length"}], 
  "*)"}]], "Input",
 CellChangeTimes->{{3.6269927323589015`*^9, 3.6269928150386305`*^9}, {
   3.626993408302563*^9, 3.6269934281977015`*^9}, 3.6269986280241146`*^9}],

Cell[BoxData[
 RowBox[{"(*", 
  RowBox[{"1.7", "<=", 
   RowBox[{"widthHightRatio", "@", "i"}], "\[LessEqual]", "1.99"}], 
  "*)"}]], "Input",
 CellChangeTimes->{
  3.626756396285902*^9, {3.626756459242503*^9, 3.626756462183671*^9}, {
   3.6267565958643174`*^9, 3.626756608068015*^9}, {3.6267567252497177`*^9, 
   3.626756726273776*^9}}],

Cell[BoxData[
 RowBox[{"(*", 
  RowBox[{
   RowBox[{"cardsOkQ", "[", "icards_", "]"}], ":=", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{"1.81", "<=", 
      RowBox[{"widthHightRatio", "@", "icards"}], "\[LessEqual]", "1.95"}]}], 
    "\[IndentingNewLine]", "]"}]}], "*)"}]], "Input",
 CellChangeTimes->{{3.6267484249639688`*^9, 3.626748445863164*^9}, {
   3.6267486043652296`*^9, 3.6267486269905243`*^9}, 3.6267486625875597`*^9}],

Cell[BoxData[""], "Input",
 CellChangeTimes->{{3.6267484029307084`*^9, 3.6267484091560645`*^9}, 
   3.6267486343889475`*^9}],

Cell[BoxData[
 RowBox[{"(*", 
  RowBox[{
   RowBox[{
    RowBox[{"Import", "@", 
     RowBox[{"imagenames", "[", 
      RowBox[{"[", "1", "]"}], "]"}]}], "//", 
    RowBox[{
     RowBox[{"ImageResize", "[", 
      RowBox[{"#", ",", "1024"}], "]"}], "&"}]}], "//", 
   RowBox[{
    RowBox[{"Export", "[", 
     RowBox[{"\"\<0000000000.bmp\>\"", ",", "#"}], "]"}], "&"}]}], 
  "*)"}]], "Input",
 CellChangeTimes->{{3.626995911906761*^9, 3.626995930367817*^9}, {
  3.626995972849247*^9, 3.626995987572089*^9}, {3.6269960288254485`*^9, 
  3.626996066578608*^9}}],

Cell[BoxData[
 RowBox[{"(*", 
  RowBox[{"(*", "\:56fe\:50cf\:7684\:5bbd\:9ad8\:6bd4", "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"widthHightRatio", "[", "i_", "]"}], ":=", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"dim", ",", "ratio"}], "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"dim", "=", 
        RowBox[{"ImageDimensions", "@", "i"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"ratio", "=", 
        RowBox[{
         RowBox[{"dim", "//", 
          RowBox[{
           RowBox[{
            RowBox[{"#", "[", 
             RowBox[{"[", "1", "]"}], "]"}], "/", 
            RowBox[{"#", "[", 
             RowBox[{"[", "2", "]"}], "]"}]}], "&"}]}], "//", "N"}]}]}]}], 
     "\[IndentingNewLine]", "]"}]}], ";"}], "*)"}]], "Input",
 CellChangeTimes->{{3.626666146904519*^9, 3.6266662731027365`*^9}, {
  3.6267307508150654`*^9, 3.626730790483334*^9}, {3.626730883979682*^9, 
  3.626730906133949*^9}}],

Cell[BoxData[""], "Input",
 CellChangeTimes->{
  3.626748023125985*^9, {3.6267480788801737`*^9, 3.626748151160308*^9}, 
   3.626748187471385*^9}],

Cell[BoxData[
 RowBox[{"(*", "\[IndentingNewLine]", "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"iorig", "=", 
     RowBox[{"Import", "[", "\"\<scan/0012.bmp\>\"", "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"i", "=", 
     RowBox[{"imageTakeRectangle", "[", "iorig", "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{"distorOkQ", "@", "i"}]}], "*)"}]], "Input",
 CellChangeTimes->{{3.626672935857825*^9, 3.6266730013485703`*^9}, {
   3.626673074926779*^9, 3.6266731771986284`*^9}, {3.626673292065199*^9, 
   3.62667331901874*^9}, {3.626673483289136*^9, 3.6266735018982005`*^9}, {
   3.626674103731623*^9, 3.6266741755917335`*^9}, {3.626674220167283*^9, 
   3.6266742380083036`*^9}, 3.626730734198115*^9, {3.626730886695837*^9, 
   3.6267308877368965`*^9}, {3.626732462149948*^9, 3.626732493802758*^9}, {
   3.626732525713584*^9, 3.626732532151952*^9}, {3.626732778257028*^9, 
   3.6267327795141*^9}, {3.6267329456096*^9, 3.6267329828147287`*^9}, {
   3.6267332217163925`*^9, 3.626733297339718*^9}, {3.626733502702464*^9, 
   3.6267335497521553`*^9}, {3.6267336120167165`*^9, 
   3.6267336397703037`*^9}, {3.626734813141417*^9, 3.6267348158145695`*^9}, {
   3.626734860627133*^9, 3.626734863067272*^9}, {3.626735048806896*^9, 
   3.6267350521340866`*^9}, {3.6267357334640565`*^9, 3.626735784107953*^9}, {
   3.626735873889088*^9, 3.6267358748571434`*^9}, {3.626735986176511*^9, 
   3.626735998560219*^9}, {3.626736028951957*^9, 3.6267360394635587`*^9}, {
   3.6267367297970433`*^9, 3.6267367396586075`*^9}}],

Cell[BoxData[
 RowBox[{"(*", 
  RowBox[{"rectangleOkQ", "@", "i"}], "*)"}]], "Input",
 CellChangeTimes->{{3.626735954661708*^9, 3.62673595504173*^9}}],

Cell[BoxData[
 RowBox[{"(*", "4", "*)"}]], "Input",
 CellChangeTimes->{
  3.6267358024660034`*^9, {3.62673589559833*^9, 3.6267358963093705`*^9}}],

Cell[BoxData[
 RowBox[{"(*", "i", "*)"}]], "Input",
 CellChangeTimes->{{3.6267358996445613`*^9, 3.62673590083663*^9}}],

Cell[BoxData[
 RowBox[{"(*", "\[IndentingNewLine]", 
  RowBox[{"distorRatio", "@", "i"}], "*)"}]], "Input",
 CellChangeTimes->{{3.626733644210558*^9, 3.6267336450566063`*^9}, {
   3.626733755927948*^9, 3.626733810848089*^9}, 3.62673423274122*^9, {
   3.6267350921583757`*^9, 3.626735100762868*^9}, 3.6267367263628473`*^9}],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"iorig", "=", 
     RowBox[{"Import", "[", "\"\<scan/0002.bmp\>\"", "]"}]}], ";", 
    "\[IndentingNewLine]", "  ", 
    RowBox[{"i", "=", 
     RowBox[{"imageTakeRectangle", "[", "iorig", "]"}]}], ";", 
    "\[IndentingNewLine]", 
    RowBox[{"showDistorRatio", "@", "i"}]}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{"widthHightRatio", "[", "i", "]"}], "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", 
   RowBox[{
    RowBox[{"dim", "=", 
     RowBox[{"ImageDimensions", "@", "i"}]}], ";", "\[IndentingNewLine]", 
    RowBox[{"dim", "//", 
     RowBox[{
      RowBox[{
       RowBox[{"#", "[", 
        RowBox[{"[", "1", "]"}], "]"}], "/", 
       RowBox[{"#", "[", 
        RowBox[{"[", "2", "]"}], "]"}]}], "&"}]}]}], "*)"}], 
  RowBox[{"(*", 
   RowBox[{"//", 
    RowBox[{
     RowBox[{"#", "\[Equal]", "2"}], "&"}]}], "*)"}]}]], "Input",
 CellChangeTimes->{{3.6266656261667347`*^9, 3.6266656408045716`*^9}, {
   3.626665782727689*^9, 3.626665827709262*^9}, {3.6266659705844336`*^9, 
   3.626665980377994*^9}, 3.626666024282505*^9, {3.626666064068781*^9, 
   3.626666116609786*^9}, {3.626666287683571*^9, 3.6266663510901976`*^9}, {
   3.6266663886323447`*^9, 3.6266663898604155`*^9}, {3.626666422712294*^9, 
   3.6266664234033337`*^9}, {3.626666469621977*^9, 3.6266664702760143`*^9}, {
   3.6266724951006145`*^9, 3.626672519457008*^9}, {3.626672719261436*^9, 
   3.626672781203979*^9}, {3.626673185717116*^9, 3.626673187805235*^9}, {
   3.626673507698532*^9, 3.6266735084065723`*^9}, {3.626734162182184*^9, 
   3.626734163200242*^9}, 3.6267342214515743`*^9, {3.626734348853861*^9, 
   3.6267343498579187`*^9}, {3.6267344120874777`*^9, 3.6267344172557735`*^9}, 
   3.6267351062491817`*^9, 3.6267391970841637`*^9}],

Cell[BoxData[""], "Input",
 CellChangeTimes->{3.6267344066951694`*^9}],

Cell[BoxData[
 RowBox[{"(*", 
  RowBox[{
   RowBox[{"rectangleOkQ", "[", "irect_", "]"}], ":=", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{"1.31", "<=", 
      RowBox[{"widthHightRatio", "@", "irect"}], "\[LessEqual]", "1.32"}]}], 
    "\[IndentingNewLine]", "]"}]}], "*)"}]], "Input",
 CellChangeTimes->{{3.6266691170284*^9, 3.626669209404684*^9}, 
   3.626670838431859*^9}],

Cell[BoxData[
 RowBox[{"(*", 
  RowBox[{"rectangleOkQ", "[", 
   RowBox[{
    RowBox[{"Import", "@", 
     RowBox[{"imagenames", "[", 
      RowBox[{"[", "4", "]"}], "]"}]}], "//", "imageTakeRectangle"}], "]"}], 
  "*)"}]], "Input",
 CellChangeTimes->{{3.626669241650528*^9, 3.626669309298397*^9}, {
  3.626669340619189*^9, 3.6266693413702316`*^9}}],

Cell[BoxData[
 RowBox[{"(*", 
  RowBox[{
   RowBox[{
    RowBox[{"imagenames", "=", 
     RowBox[{"FileNames", "[", "\"\<scan/*.bmp\>\"", "]"}]}], ";"}], 
   "\[IndentingNewLine]", 
   RowBox[{"ratios", "=", 
    RowBox[{"Table", "[", 
     RowBox[{
      RowBox[{
       RowBox[{"ToString", "[", "i", "]"}], "<>", "\"\< \>\"", "<>", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{
          RowBox[{
           RowBox[{"Import", "@", 
            RowBox[{"imagenames", "[", 
             RowBox[{"[", "i", "]"}], "]"}]}], "//", "imageTakeRectangle"}], "//",
           "widthHightRatio"}], "//", "ToString"}], ")"}]}], ",", 
      RowBox[{"{", 
       RowBox[{"i", ",", 
        RowBox[{"Length", "@", "imagenames"}]}], "}"}]}], "]"}]}], 
   "\[IndentingNewLine]", 
   RowBox[{"Export", "[", 
    RowBox[{"\"\<ratios.txt\>\"", ",", "ratios"}], "]"}]}], "*)"}]], "Input",
 CellChangeTimes->{{3.626666537526861*^9, 3.6266665572899914`*^9}, 
   3.6266665888797984`*^9, {3.6266671128127656`*^9, 3.626667270570789*^9}, {
   3.626667421454419*^9, 3.6266674256806602`*^9}, {3.62666766047109*^9, 
   3.6266676667964516`*^9}, {3.626667801199139*^9, 3.626667815083933*^9}, {
   3.6266678524170685`*^9, 3.626667866761889*^9}, {3.62666792883844*^9, 
   3.6266679965853148`*^9}, {3.626668062852105*^9, 3.6266680676373787`*^9}}],

Cell[BoxData[
 RowBox[{"(*", 
  RowBox[{
   RowBox[{"Import", "@", "\"\<scan/0004.bmp\>\""}], "//", 
   "imageTakeRectangle"}], "*)"}]], "Input",
 CellChangeTimes->{{3.6266694877406034`*^9, 3.626669493131912*^9}, 
   3.6266701118403*^9, {3.626670211783016*^9, 3.626670212499058*^9}, {
   3.6266703522300496`*^9, 3.62667035416216*^9}, {3.6266705919167585`*^9, 
   3.6266705940068784`*^9}, {3.6266707490667477`*^9, 3.626670749554775*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", "1.3170731707317074`", "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", "1.3168238993710693`", "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", "1.3188976377952757`", "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", "1.203450754852624`", "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", "1.314724919093851`", "*)"}], "\[IndentingNewLine]", 
  RowBox[{"(*", "xxxxxxxxxxxxxxxxx", "*)"}]}]], "Input",
 CellChangeTimes->{{3.626666340934617*^9, 3.6266663434127584`*^9}, {
  3.6266663804988794`*^9, 3.6266664606764655`*^9}, {3.626666495459455*^9, 
  3.6266665010027723`*^9}}],

Cell[BoxData[
 RowBox[{"(*", 
  RowBox[{
  "(*", "\:5bfc\:51fa\:7b2c\:4e00\:6b65\:5904\:7406\:7ed3\:679c", "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{"Table", "[", 
   RowBox[{
    RowBox[{"Export", "[", 
     RowBox[{
      RowBox[{"newnames", "[", 
       RowBox[{"[", "i", "]"}], "]"}], ",", 
      RowBox[{"reconize", "@", 
       RowBox[{"imagenames", "[", 
        RowBox[{"[", "i", "]"}], "]"}]}]}], "]"}], ",", 
    RowBox[{"{", 
     RowBox[{"i", ",", "1", ",", 
      RowBox[{"Length", "@", "imagenames"}]}], "}"}]}], "]"}], 
  "*)"}]], "Input",
 CellChangeTimes->{{3.6265011750298853`*^9, 3.626501179269128*^9}, {
   3.626501420498925*^9, 3.626501421431978*^9}, {3.626573582467896*^9, 
   3.6265735840039835`*^9}, 3.6265736232522287`*^9, {3.6265810946215663`*^9, 
   3.6265811244692736`*^9}, {3.626585229617075*^9, 3.6265852343663464`*^9}, 
   3.626585348568878*^9}],

Cell[BoxData[
 RowBox[{"(*", 
  RowBox[{"goodOrBad", "=", 
   RowBox[{"Table", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"Import", "[", 
       RowBox[{"newnames", "[", 
        RowBox[{"[", "i", "]"}], "]"}], "]"}], "//", "selectPartOkQ"}], ",", 
     RowBox[{"{", 
      RowBox[{"i", ",", "1", ",", 
       RowBox[{"Length", "@", "newnames"}]}], "}"}]}], "]"}]}], 
  "*)"}]], "Input",
 CellChangeTimes->{{3.6265775401342616`*^9, 3.6265775876449785`*^9}, {
   3.6265776630422916`*^9, 3.6265777771528177`*^9}, {3.626577845947753*^9, 
   3.6265779368559523`*^9}, 3.626578596448679*^9, {3.626578627249441*^9, 
   3.626578658376221*^9}, 3.6265807907991886`*^9, {3.6265810819618425`*^9, 
   3.626581082332864*^9}, {3.626581143625369*^9, 3.6265811765912547`*^9}}],

Cell[BoxData[
 RowBox[{"(*", 
  RowBox[{
   RowBox[{"selectPartOkQ", "[", "iSelect_", "]"}], ":=", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", "dim", "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"dim", "=", 
       RowBox[{"ImageDimensions", "@", "iSelect"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"dim", "//", 
        RowBox[{
         RowBox[{"Floor", "[", 
          RowBox[{
           RowBox[{"#", "[", 
            RowBox[{"[", "1", "]"}], "]"}], "/", 
           RowBox[{"#", "[", 
            RowBox[{"[", "2", "]"}], "]"}]}], "]"}], "&"}]}], "//", 
       RowBox[{
        RowBox[{"#", "\[Equal]", "2"}], "&"}]}]}]}], "\[IndentingNewLine]", 
    "]"}]}], "*)"}]], "Input",
 CellChangeTimes->{{3.6265781577625875`*^9, 3.626578193205615*^9}, {
  3.626578320285884*^9, 3.6265783321815643`*^9}, {3.6265784542965484`*^9, 
  3.6265785367492647`*^9}, {3.6265807452385826`*^9, 3.62658075444611*^9}}],

Cell[BoxData[
 RowBox[{"(*", 
  RowBox[{
   RowBox[{"exportGoodAndBad", "[", "newnames_", "]"}], ":=", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", "goodOrBad", "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"FileExistsQ", "[", "\"\<select/good\>\"", "]"}], ",", 
        RowBox[{"DeleteDirectory", "[", 
         RowBox[{"\"\<select/good\>\"", ",", 
          RowBox[{"DeleteContents", "\[Rule]", "True"}]}], "]"}], ",", 
        "Null"}], "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"FileExistsQ", "[", "\"\<select/bad\>\"", "]"}], ",", 
        RowBox[{"DeleteDirectory", "[", 
         RowBox[{"\"\<select/bad\>\"", ",", 
          RowBox[{"DeleteContents", "\[Rule]", "True"}]}], "]"}], ",", 
        "Null"}], "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"CreateDirectory", "[", "\"\<select/good\>\"", "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"CreateDirectory", "[", "\"\<select/bad\>\"", "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"goodOrBad", "=", 
       RowBox[{"Table", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"Import", "[", 
           RowBox[{"newnames", "[", 
            RowBox[{"[", "i", "]"}], "]"}], "]"}], "//", "selectPartOkQ"}], 
         ",", 
         RowBox[{"{", 
          RowBox[{"i", ",", "1", ",", 
           RowBox[{"Length", "@", "newnames"}]}], "}"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"Table", "[", 
       RowBox[{
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{"goodOrBad", "[", 
           RowBox[{"[", "i", "]"}], "]"}], ",", "\[IndentingNewLine]", 
          RowBox[{"CopyFile", "[", 
           RowBox[{
            RowBox[{"newnames", "[", 
             RowBox[{"[", "i", "]"}], "]"}], ",", 
            RowBox[{"\"\<select/good/\>\"", "<>", 
             RowBox[{"filename", "[", 
              RowBox[{"newnames", "[", 
               RowBox[{"[", "i", "]"}], "]"}], "]"}], "<>", 
             "\"\<.jpg\>\""}]}], "]"}], ",", "\[IndentingNewLine]", 
          RowBox[{"CopyFile", "[", 
           RowBox[{
            RowBox[{"newnames", "[", 
             RowBox[{"[", "i", "]"}], "]"}], ",", 
            RowBox[{"\"\<select/bad/\>\"", "<>", 
             RowBox[{"filename", "[", 
              RowBox[{"newnames", "[", 
               RowBox[{"[", "i", "]"}], "]"}], "]"}], "<>", 
             "\"\<.jpg\>\""}]}], "]"}]}], "]"}], ",", "\[IndentingNewLine]", 
        RowBox[{"{", 
         RowBox[{"i", ",", "1", ",", 
          RowBox[{"Length", "@", "newnames"}]}], "}"}]}], 
       "\[IndentingNewLine]", "]"}]}]}], "\[IndentingNewLine]", "]"}]}], 
  "*)"}]], "Input",
 CellChangeTimes->{{3.6265816031946554`*^9, 3.626581769322157*^9}, {
  3.626581805811244*^9, 3.626581852608921*^9}, {3.6265822004158144`*^9, 
  3.6265822394360456`*^9}, {3.626582866757927*^9, 3.6265829485646057`*^9}, {
  3.6265829811044674`*^9, 3.626583029123214*^9}, {3.6265831317300825`*^9, 
  3.626583142120677*^9}, {3.6265834022895575`*^9, 3.6265834834371986`*^9}, {
  3.6265837182766314`*^9, 3.626583721181797*^9}, {3.6265837727327456`*^9, 
  3.6265838196404285`*^9}, {3.6265838661860905`*^9, 3.6265838992459817`*^9}, {
  3.6265840663605404`*^9, 3.6265840968332834`*^9}, {3.626584771867893*^9, 
  3.626584772576934*^9}}],

Cell[BoxData[
 RowBox[{"(*", 
  RowBox[{"exportGoodAndBad", "[", "newnames", "]"}], "*)"}]], "Input",
 CellChangeTimes->{{3.626583510100724*^9, 3.6265835173681393`*^9}}],

Cell[BoxData[
 RowBox[{"(*", 
  RowBox[{"CopyFile", "[", 
   RowBox[{
    RowBox[{"newnames", "[", 
     RowBox[{"[", "1", "]"}], "]"}], ",", 
    RowBox[{"\"\<select/good/\>\"", "<>", 
     RowBox[{"filename", "[", 
      RowBox[{"newnames", "[", 
       RowBox[{"[", "1", "]"}], "]"}], "]"}], "<>", "\"\<.jpg\>\""}]}], "]"}],
   "*)"}]], "Input",
 CellChangeTimes->{{3.6265831227535686`*^9, 3.6265832193890963`*^9}}],

Cell[BoxData[
 RowBox[{"(*", 
  RowBox[{"exportGoodAndBad", "[", "newnames", "]"}], "*)"}]], "Input",
 CellChangeTimes->{{3.6265818706249514`*^9, 3.626581877696356*^9}}]
},
WindowSize->{1440, 818},
WindowMargins->{{-8, Automatic}, {Automatic, -8}},
FrontEndVersion->"10.0 for Microsoft Windows (64-bit) (September 9, 2014)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[558, 20, 45408, 1174, 3059, "Input"],
Cell[45969, 1196, 552, 12, 31, "Input"],
Cell[46524, 1210, 129, 2, 31, "Input"],
Cell[46656, 1214, 517, 16, 31, "Input"],
Cell[47176, 1232, 513, 13, 31, "Input"],
Cell[47692, 1247, 317, 7, 31, "Input"],
Cell[48012, 1256, 962, 25, 132, "Input"],
Cell[48977, 1283, 2790, 67, 212, "Input"],
Cell[51770, 1352, 96, 1, 31, "Input"],
Cell[51869, 1355, 1606, 37, 132, InheritFromParent],
Cell[53478, 1394, 240, 5, 31, "Input"],
Cell[53721, 1401, 207, 4, 31, "Input"],
Cell[53931, 1407, 2499, 67, 212, InheritFromParent],
Cell[56433, 1476, 295, 6, 31, "Input"],
Cell[56731, 1484, 341, 9, 31, "Input"],
Cell[57075, 1495, 337, 8, 31, "Input"],
Cell[57415, 1505, 494, 11, 72, "Input"],
Cell[57912, 1518, 124, 2, 31, "Input"],
Cell[58039, 1522, 558, 16, 31, "Input"],
Cell[58600, 1540, 992, 26, 112, "Input"],
Cell[59595, 1568, 145, 3, 31, "Input"],
Cell[59743, 1573, 1551, 27, 112, "Input"],
Cell[61297, 1602, 150, 3, 31, "Input"],
Cell[61450, 1607, 145, 3, 31, "Input"],
Cell[61598, 1612, 118, 2, 31, "Input"],
Cell[61719, 1616, 322, 5, 52, "Input"],
Cell[62044, 1623, 1801, 39, 152, "Input"],
Cell[63848, 1664, 70, 1, 31, "Input"],
Cell[63921, 1667, 440, 11, 72, "Input"],
Cell[64364, 1680, 349, 9, 31, "Input"],
Cell[64716, 1691, 1324, 31, 72, "Input"],
Cell[66043, 1724, 436, 8, 31, "Input"],
Cell[66482, 1734, 605, 10, 132, "Input"],
Cell[67090, 1746, 879, 22, 52, "Input"],
Cell[67972, 1770, 763, 17, 31, "Input"],
Cell[68738, 1789, 965, 25, 92, "Input"],
Cell[69706, 1816, 3367, 75, 252, "Input"],
Cell[73076, 1893, 169, 3, 31, "Input"],
Cell[73248, 1898, 418, 11, 31, "Input"],
Cell[73669, 1911, 169, 3, 31, "Input"]
}
]
*)

(* End of internal cache information *)
